import{a0 as m,$ as w,S as f,o as l,b as y,w as S,g as t,j as i,t as p,P as s,n as d,U as r,e as o,T as x,v as h,x as k}from"./modules/vue-CJxkp9xt.js";import{I as _}from"./slidev/default-D6H0yPad.js";import{u as T,f as j}from"./slidev/context-vhmVP5PI.js";import{_ as N}from"./index-Clevg95E.js";import"./monaco/bundled-types-BKFcKlQo.js";import"./modules/shiki-DHITe178.js";import"./modules/file-saver-C8QSpN-3.js";const H={class:"absolute inset-0 p-3",style:{background:"linear-gradient(135deg, #0a0f1a 0%, #1e3a5f 100%)"}},G={class:"hidden nsg-clicks-tracker"},P={class:"flex items-center justify-between mb-2"},R={class:"flex gap-2 text-xs"},D={class:"bg-white/20 text-white px-3 py-1 rounded-full font-mono"},A={class:"grid grid-cols-12 gap-2 h-[calc(100%-90px)] text-xs items-center"},B={class:"col-span-2 space-y-2 flex flex-col justify-center"},I={class:"bg-blue-500/20 border border-blue-500/50 rounded-lg p-2 text-center"},C={class:"col-span-1 flex flex-col justify-center items-center gap-3"},M={key:0,width:"45",height:"12",viewBox:"0 0 45 12"},V=["stroke"],$=["fill"],E={key:0,x1:"5",y1:"10",x2:"40",y2:"2",stroke:"#f87171","stroke-width":"3"},L={class:"col-span-4 flex flex-col justify-center"},z={class:"flex items-center justify-between mb-2"},U={class:"space-y-1"},W={key:0,class:"text-green-400"},q={key:0,class:"text-red-400 block-icon"},O={key:0,initial:{opacity:0,y:10},enter:{opacity:1,y:0},class:"mt-2 bg-black/30 rounded p-1.5"},Y={class:"col-span-1 flex flex-col justify-center items-center gap-3"},F={key:0,width:"45",height:"12",viewBox:"0 0 45 12"},J={class:"col-span-4 space-y-2 flex flex-col justify-center"},K={class:"flex-1"},Q={class:"flex gap-2 mt-1"},X={key:0,class:"bg-green-500/20 text-green-300 px-1 rounded text-xs conn-count"},Z={key:0,initial:{opacity:0,scale:.8},enter:{opacity:1,scale:1},class:"bg-red-500/10 border border-red-500/30 rounded-lg p-2 text-center"},tt={class:"absolute bottom-3 left-3 right-3 bg-black/60 rounded-lg p-2 max-h-24 overflow-hidden"},et={class:"text-xs space-y-0.5"},st={class:"text-white/70"},nt={class:"text-green-400"},it={class:"text-red-400"},lt={class:"text-orange-400"},ot={class:"text-orange-400"},rt={class:"text-red-400"},dt={class:"text-green-400"},at={class:"text-purple-400"},xt={class:"text-green-400"},pt={class:"text-cyan-400"},ct={__name:"slides.md__slidev_98",setup(gt){const{$clicksContext:b,$clicks:n,$frontmatter:u}=T();b.setup();let c;return m(()=>{c=setInterval(()=>{const g=document.querySelector(".conn-count");if(g){const e=1+Math.floor(Math.random()*5);g.textContent=`conn: ${e}`}},1e3)}),w(()=>{c&&clearInterval(c)}),(g,e)=>{const v=f("motion"),a=f("click");return l(),y(_,h(k(s(j)(s(u),97))),{default:S(()=>[e[31]||(e[31]=t("h1",null,"NSG: 不正アクセス検知シナリオ",-1)),t("div",H,[i(" $clicks トラッカー "),t("p",null,[t("span",G,p(s(n)),1)]),t("div",P,[e[0]||(e[0]=t("h2",{class:"text-base font-bold text-white m-0"},"🛡️ NSG によるトラフィック制御",-1)),t("div",R,[t("span",D,"Step "+p(s(n))+"/10",1),t("span",{class:d([s(n)>=4&&s(n)<7?"bg-red-500/30 text-red-300":"bg-green-500/30 text-green-300","px-2 py-1 rounded transition-all"])},p(s(n)>=4&&s(n)<7?"🚨 攻撃検知":"✓ 正常"),3)])]),t("div",A,[i(" インターネット側 "),t("div",B,[i(" 正常ユーザー "),t("div",I,[e[1]||(e[1]=t("div",{class:"text-2xl mb-1"},"👤",-1)),e[2]||(e[2]=t("div",{class:"text-blue-400 font-bold text-xs"},"正常ユーザー",-1)),e[3]||(e[3]=t("div",{class:"text-white/50 text-xs mt-1"},"203.0.113.50",-1)),t("div",{class:d([s(n)>=1?"bg-green-500/30 text-green-300":"bg-white/10 text-white/50","mt-1 rounded px-1 py-0.5 text-xs transition-all"])}," :443 HTTPS ",2)]),i(" 攻撃者 "),s(n)>=3?r((l(),o("div",{key:0,initial:{opacity:0,x:-30},enter:{opacity:1,x:0},class:d([s(n)>=7?"opacity-40":"","bg-red-500/20 border border-red-500/50 rounded-lg p-2 text-center transition-all"])},[...e[4]||(e[4]=[t("div",{class:"text-2xl mb-1"},"💀",-1),t("div",{class:"text-red-400 font-bold text-xs"},"攻撃者",-1),t("div",{class:"text-white/50 text-xs mt-1"},"45.33.32.156",-1),t("div",{class:"mt-1 bg-red-500/30 text-red-300 rounded px-1 py-0.5 text-xs attack-pulse"}," :22 SSH ",-1)])],2)),[[v]]):i("v-if",!0)]),i(" 矢印（インターネット → NSG） "),t("div",C,[i(" 正常トラフィック "),s(n)>=1?(l(),o("svg",M,[...e[5]||(e[5]=[t("line",{x1:"0",y1:"6",x2:"35",y2:"6",stroke:"#4ade80","stroke-width":"2","stroke-dasharray":"4,3",class:"nsg-flow-arrow"},null,-1),t("polygon",{points:"35,2 45,6 35,10",fill:"#4ade80"},null,-1)])])):i("v-if",!0),i(" 攻撃トラフィック "),s(n)>=4?(l(),o("svg",{key:1,width:"45",height:"12",viewBox:"0 0 45 12",class:d(s(n)>=7?"opacity-30":"")},[t("line",{x1:"0",y1:"6",x2:"35",y2:"6",stroke:s(n)>=6?"#f87171":"#f97316","stroke-width":"2","stroke-dasharray":"4,3",class:d(s(n)>=7?"":"nsg-flow-arrow")},null,10,V),t("polygon",{points:"35,2 45,6 35,10",fill:s(n)>=6?"#f87171":"#f97316"},null,8,$),s(n)>=7?(l(),o("line",E)):i("v-if",!0)],2)):i("v-if",!0)]),i(" NSG "),t("div",L,[t("div",{class:d([s(n)>=4&&s(n)<7?"border-orange-400 nsg-alert-box":"border-cyan-400","bg-gradient-to-br from-cyan-600/20 to-blue-600/20 border-2 rounded-xl p-2 transition-all"])},[t("div",z,[e[6]||(e[6]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"text-xl"},"🛡️"),t("span",{class:"text-sm font-bold text-cyan-300"},"nsg-web-subnet")],-1)),t("span",{class:d([s(n)>=4&&s(n)<7?"text-orange-400 nsg-scanning":"text-green-400","text-xs"])},p(s(n)>=4&&s(n)<7?"⚡ 評価中...":"● Active"),3)]),i(" 受信規則 "),e[12]||(e[12]=t("div",{class:"text-xs text-white/60 mb-1"},"📥 受信セキュリティ規則",-1)),t("div",U,[i(" Rule 100: HTTPS "),t("div",{class:d([s(n)>=2?"bg-green-500/30 border-green-500/50 rule-highlight":"bg-white/5 border-white/10","border rounded p-1 flex justify-between items-center transition-all"])},[e[7]||(e[7]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"text-white/40 w-8"},"100"),t("span",{class:"text-green-400"},"Allow"),t("span",{class:"text-white/70"},"HTTPS (443)")],-1)),s(n)>=2?(l(),o("span",W,"✓")):i("v-if",!0)],2),i(" Rule 200: HTTP "),t("div",{class:d([s(n)>=2?"bg-green-500/20 border-green-500/30":"bg-white/5 border-white/10","border rounded p-1 flex justify-between items-center transition-all"])},[...e[8]||(e[8]=[t("div",{class:"flex items-center gap-1"},[t("span",{class:"text-white/40 w-8"},"200"),t("span",{class:"text-green-400"},"Allow"),t("span",{class:"text-white/70"},"HTTP (80)")],-1)])],2),i(" Rule 300: Deny SSH "),t("div",{class:d([s(n)>=5?"bg-red-500/30 border-red-500/50 rule-highlight":"bg-white/5 border-white/10","border rounded p-1 flex justify-between items-center transition-all"])},[e[9]||(e[9]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"text-white/40 w-8"},"300"),t("span",{class:"text-red-400"},"Deny"),t("span",{class:"text-white/70"},"SSH (22)")],-1)),s(n)>=6?(l(),o("span",q,"✗")):i("v-if",!0)],2),i(" Rule 65500: DenyAll "),e[10]||(e[10]=t("div",{class:"bg-white/5 border border-white/10 rounded p-1 flex justify-between items-center opacity-60"},[t("div",{class:"flex items-center gap-1"},[t("span",{class:"text-white/40 w-8"},"65500"),t("span",{class:"text-red-400"},"Deny"),t("span",{class:"text-white/50"},"All Inbound")])],-1))]),i(" NSG フローログ "),s(n)>=8?r((l(),o("div",O,[...e[11]||(e[11]=[t("div",{class:"text-xs text-purple-400 font-bold mb-1"},"📊 NSG フローログ",-1),t("div",{class:"font-mono text-xs text-white/60 space-y-0.5"},[t("div",{class:"text-green-400"},"✓ 203.0.113.50:443 → ALLOW"),t("div",{class:"text-red-400"},"✗ 45.33.32.156:22 → DENY")],-1)])])),[[v]]):i("v-if",!0)],2)]),i(" 矢印（NSG → VM） "),t("div",Y,[s(n)>=2?(l(),o("svg",F,[...e[13]||(e[13]=[t("line",{x1:"0",y1:"6",x2:"35",y2:"6",stroke:"#4ade80","stroke-width":"2","stroke-dasharray":"4,3",class:"nsg-flow-arrow"},null,-1),t("polygon",{points:"35,2 45,6 35,10",fill:"#4ade80"},null,-1)])])):i("v-if",!0)]),i(" VM "),t("div",J,[e[19]||(e[19]=t("div",{class:"text-white/60 font-bold text-xs mb-1"},"🖥️ Web Servers (Subnet: 10.0.1.0/24)",-1)),t("div",{class:d([s(n)>=9?"border-green-500/50 bg-green-500/10":"border-green-500/30 bg-green-500/5","border rounded-lg p-2 flex gap-2 transition-all"])},[e[17]||(e[17]=t("div",{class:"text-lg"},"🖥️",-1)),t("div",K,[e[15]||(e[15]=t("div",{class:"flex justify-between items-center"},[t("span",{class:"text-green-400 font-bold text-sm"},"vm-web-001"),t("span",{class:"text-green-400 text-xs nsg-vm-pulse"},"● Running")],-1)),e[16]||(e[16]=t("div",{class:"text-white/50 text-xs"},"10.0.1.4",-1)),t("div",Q,[e[14]||(e[14]=t("span",{class:"bg-white/10 px-1 rounded text-xs"},":443 listening",-1)),s(n)>=2?(l(),o("span",X,"conn: 1")):i("v-if",!0)])])],2),e[20]||(e[20]=t("div",{class:"border border-green-500/30 bg-green-500/5 rounded-lg p-2 flex gap-2"},[t("div",{class:"text-lg"},"🖥️"),t("div",{class:"flex-1"},[t("div",{class:"flex justify-between items-center"},[t("span",{class:"text-green-400 font-bold text-sm"},"vm-web-002"),t("span",{class:"text-green-400 text-xs nsg-vm-pulse"},"● Running")]),t("div",{class:"text-white/50 text-xs"},"10.0.1.5"),t("div",{class:"flex gap-2 mt-1"},[t("span",{class:"bg-white/10 px-1 rounded text-xs"},":443 listening")])])],-1)),i(" ブロックされた攻撃表示 "),s(n)>=7?r((l(),o("div",Z,[...e[18]||(e[18]=[t("div",{class:"text-red-400 font-bold text-xs"},"🚫 SSH アクセス拒否",-1),t("div",{class:"text-white/50 text-xs mt-1"},"ポート 22 は NSG でブロック",-1)])])),[[v]]):i("v-if",!0)])]),i(" ログエリア "),t("div",tt,[t("div",et,[r((l(),o("div",st,[...e[21]||(e[21]=[x("📍 Step 1: 正常ユーザーが HTTPS (443) でアクセス開始",-1)])])),[[a]]),r((l(),o("div",nt,[...e[22]||(e[22]=[x("✅ Step 2: Rule 100 にマッチ → Allow HTTPS → VM に到達",-1)])])),[[a]]),r((l(),o("div",it,[...e[23]||(e[23]=[x("💀 Step 3: 攻撃者が SSH (22) でアクセス試行",-1)])])),[[a]]),r((l(),o("div",lt,[...e[24]||(e[24]=[x("⚡ Step 4: NSG がパケットを検査中...",-1)])])),[[a]]),r((l(),o("div",ot,[...e[25]||(e[25]=[x("🔍 Step 5: Rule 100, 200 にマッチせず → Rule 300 を評価",-1)])])),[[a]]),r((l(),o("div",rt,[...e[26]||(e[26]=[x("🚫 Step 6: Rule 300 (Deny SSH) にマッチ → パケット破棄",-1)])])),[[a]]),r((l(),o("div",dt,[...e[27]||(e[27]=[x("🛡️ Step 7: 攻撃をブロック完了 - サーバーは安全",-1)])])),[[a]]),r((l(),o("div",at,[...e[28]||(e[28]=[x("📊 Step 8: NSG フローログに記録",-1)])])),[[a]]),r((l(),o("div",xt,[...e[29]||(e[29]=[x("✅ Step 9: 正常トラフィックは継続稼働中",-1)])])),[[a]]),r((l(),o("div",pt,[...e[30]||(e[30]=[x("💡 Step 10: NSG により多層防御を実現",-1)])])),[[a]])])])])]),_:1},16)}}},St=N(ct,[["__scopeId","data-v-a3d67466"]]);export{St as default};
